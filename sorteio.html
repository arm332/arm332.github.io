<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Project description" />
		<meta name="author" content="Project author" />
		<title>Teste1</title>
		<link href="favicon.svg" rel="icon" type="image/svg+xml" />
		<style type="text/css">
		* {
			box-sizing: border-box;
		}

		:focus {
			border-color: AccentColor;
			outline: none;
		}
		
		:root {
			/* color-scheme: light dark; */
			font: 16px/1.5 system-ui, sans-serif;
		}
		
		a {
			color: AccentColor;
			text-decoration: none;
		}

		a:focus, a:hover {
			text-decoration: underline;
		}

		footer p {
			font-size: 0.8rem;
			margin: 1.075rem 1rem;
		}

		form {
			display: flex;
			flex-direction: column;
			flex: 1;
			gap: 0.5rem;
		}

		h1 {
			font-size: 1.5rem;
			margin: 0.625rem 1rem;
		}

		h2 {
			font-size: 1.25rem;
			margin: 0.8125rem 1rem;
		}

		h3 {
			font-size: 1rem;
			margin: 1rem;
		}

		header {
			background: AccentColor;
			color: AccentColorText;
			display: flex;
		}

		header a {
			color: AccentColorText;
			padding: 1rem;
		}

		header h1 {
			flex: 1;
		}

		input, select, textarea {
			border: 1px solid ButtonBorder;
			border-radius: 0.25rem;
			font: inherit;
			margin: 0 1rem;
			padding: 0.5rem;
		}

		input[type="submit"] {
			cursor: pointer;
		}

		label {
			font-weight: bold;
			margin: 0 0.5rem;
			padding: 1rem 0.5rem 0;
		}
		
		p {
			margin: 1rem;
		}
		
		section {
			display: flex;
			flex-direction: column;
			position: fixed;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
		}
		
		/* Screen width >= 640px */

		@media (min-width: 40rem) {
			article, form {
				margin: 0 auto;
				width: 40rem;
			}
		}

		/* Screen width >= 1440px */

		@media (min-width: 90rem) {
			:root {
				font-size: 18px;
			}
		}
		</style>
	</head>
	<body>
		<section id="section1">
			<header>
				<h1>Sorteio</h1>
				<!-- <a href="#">Vai</a> -->
			</header>
			<form>
				<label>Nomes separados por virgula</label>
				<textarea autofocus="yes" name="textarea1" required="yes" rows="5">Gabriela, Maria, Jaqueline, Aparecida, Sandra, Raquel, Cristiane, Beatriz, Andréia, Luana, Fabiana, Beatriz, Daniela, Natália, Luciana</textarea>
				<label>Combinação</label>
				<select name="select1">
					<option value="2">2 à 2</option>
					<option value="3">3 à 3</option>
					<option value="4">4 à 4</option>
				</select>
				<label>Resultado</label>
				<textarea name="textarea2" readonly="yes" rows="5"></textarea>
				<input type="submit" value="Vai" />
			</form>
			<footer>
				<p>Sobre | Privacidade | Termos</p>
			</footer>
		</section>
		<script type="text/javascript">
		"use strict";

		// Test.
		
		self.addEventListener("DOMContentLoaded", function(event) {
			console.log("window.DOMContentLoaded");
		});
		
		// Resources:
		// - <https://stackoverflow.com/questions/6274339/how-can-i-shuffle-an-array>,
		// - <https://stackoverflow.com/questions/8495687/split-array-into-chunks>

		section1.addEventListener("submit", async function(event) {
			console.log("section1.submit");
			event.preventDefault();

			var f = event.target;
			var e = f.elements.textarea1;
			var v = e.value;
			var a = v.split(',');
			var i, j, x;
			
			for (i = 0; i < a.length; i++) {
				a[i] = a[i].trim();
			}
			
			for (i = a.length - 1; i > 0; i--) {
				j = Math.floor(Math.random() * (i + 1));
				x = a[i];
				a[i] = a[j];
				a[j] = x;
			}
			
			e = f.elements.select1;
			i = e.selectedIndex;
			j = parseInt(e.options[i].value); // MUST not be zero
			x = "";

			for (i = 0; i < a.length; i += j) {
				const chunk = a.slice(i, i + j);
				x += chunk.join(", ") + "\n";
			}
			
			e = event.target.elements.textarea2;
			e.value = x;
		});
		</script>
	</body>
</html>
